<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>基础语法 | WEB Doc | 在线文档</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/webnote/assets/logo.png">
    <meta name="description" content="A VuePress project Create by enbo.wang.">
    <link rel="preload" href="/webnote/assets/css/0.styles.b4dff61e.css" as="style"><link rel="preload" href="/webnote/assets/js/app.24a2cd47.js" as="script"><link rel="preload" href="/webnote/assets/js/2.3d8178f3.js" as="script"><link rel="preload" href="/webnote/assets/js/10.4318cfdf.js" as="script"><link rel="prefetch" href="/webnote/assets/js/11.e5a9108b.js"><link rel="prefetch" href="/webnote/assets/js/12.c9a0038b.js"><link rel="prefetch" href="/webnote/assets/js/13.fe12fe70.js"><link rel="prefetch" href="/webnote/assets/js/14.c8165e7b.js"><link rel="prefetch" href="/webnote/assets/js/15.8ba27b65.js"><link rel="prefetch" href="/webnote/assets/js/16.bd92d356.js"><link rel="prefetch" href="/webnote/assets/js/17.c1b4e7a0.js"><link rel="prefetch" href="/webnote/assets/js/18.7d1511c8.js"><link rel="prefetch" href="/webnote/assets/js/19.9db155b6.js"><link rel="prefetch" href="/webnote/assets/js/20.06cc3d86.js"><link rel="prefetch" href="/webnote/assets/js/21.b4bc5a31.js"><link rel="prefetch" href="/webnote/assets/js/22.c742e6bc.js"><link rel="prefetch" href="/webnote/assets/js/23.2c225cc1.js"><link rel="prefetch" href="/webnote/assets/js/24.0228042c.js"><link rel="prefetch" href="/webnote/assets/js/25.da56562b.js"><link rel="prefetch" href="/webnote/assets/js/26.fa75dae9.js"><link rel="prefetch" href="/webnote/assets/js/27.7ad52951.js"><link rel="prefetch" href="/webnote/assets/js/28.5d25d675.js"><link rel="prefetch" href="/webnote/assets/js/29.3f16206b.js"><link rel="prefetch" href="/webnote/assets/js/3.6358e9be.js"><link rel="prefetch" href="/webnote/assets/js/30.f2c12df9.js"><link rel="prefetch" href="/webnote/assets/js/31.f12f3f34.js"><link rel="prefetch" href="/webnote/assets/js/32.3b5ce204.js"><link rel="prefetch" href="/webnote/assets/js/33.4dc01bc0.js"><link rel="prefetch" href="/webnote/assets/js/34.8bebc704.js"><link rel="prefetch" href="/webnote/assets/js/35.bb7fc5dc.js"><link rel="prefetch" href="/webnote/assets/js/36.30252ca2.js"><link rel="prefetch" href="/webnote/assets/js/37.6383ae8a.js"><link rel="prefetch" href="/webnote/assets/js/38.aaa0fb61.js"><link rel="prefetch" href="/webnote/assets/js/39.a88f2190.js"><link rel="prefetch" href="/webnote/assets/js/4.3219b438.js"><link rel="prefetch" href="/webnote/assets/js/40.4fa1414e.js"><link rel="prefetch" href="/webnote/assets/js/5.f8c77af5.js"><link rel="prefetch" href="/webnote/assets/js/6.1e845e5a.js"><link rel="prefetch" href="/webnote/assets/js/7.e36b2d9c.js"><link rel="prefetch" href="/webnote/assets/js/8.855cd9ed.js"><link rel="prefetch" href="/webnote/assets/js/9.394ce857.js">
    <link rel="stylesheet" href="/webnote/assets/css/0.styles.b4dff61e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/webnote/" class="router-link-active no-logo home-link"><!----> <span class="site-name">WEB Doc | 在线文档</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/webnote/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          前端笔记
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          后端笔记
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          工具使用
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/webnote/tech/">
          技术方案
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/webnote/doc/">
          文档编写
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/enbo-wang/vuepress" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Go学习笔记</span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webnote/be-note/go-note/" aria-current="page" title="Go语言简介" class="sidebar-link">Go语言简介</a></li><li><a href="/webnote/be-note/go-note/0.语言基础.html" title="基础语法" class="active sidebar-link">基础语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/be-note/go-note/0.语言基础.html#_1-变量和常量" title="1.变量和常量" class="sidebar-link">1.变量和常量</a></li><li class="sidebar-sub-header"><a href="/webnote/be-note/go-note/0.语言基础.html#_2-逻辑分支-条件和循环" title="2.逻辑分支:条件和循环" class="sidebar-link">2.逻辑分支:条件和循环</a></li><li class="sidebar-sub-header"><a href="/webnote/be-note/go-note/0.语言基础.html#_3-数据类型-数组与切片" title="3.数据类型:数组与切片" class="sidebar-link">3.数据类型:数组与切片</a></li><li class="sidebar-sub-header"><a href="/webnote/be-note/go-note/0.语言基础.html#_4-数据类型-map的使用" title="4. 数据类型:Map的使用" class="sidebar-link">4. 数据类型:Map的使用</a></li><li class="sidebar-sub-header"><a href="/webnote/be-note/go-note/0.语言基础.html#_5-函数" title="5.函数" class="sidebar-link">5.函数</a></li></ul></li><li><a href="/webnote/be-note/go-note/1.面向对象.html" title="面向对象" class="sidebar-link">面向对象</a></li><li><a href="/webnote/be-note/go-note/2.Go语言的接口.html" title="Go语言的接口" class="sidebar-link">Go语言的接口</a></li><li><a href="/webnote/be-note/go-note/3.Context的使用.html" title="Context的使用" class="sidebar-link">Context的使用</a></li><li><a href="/webnote/be-note/go-note/4.协程机制.html" title="协程机制" class="sidebar-link">协程机制</a></li><li><a href="/webnote/be-note/go-note/5.Channel的使用.html" title="Channel的使用" class="sidebar-link">Channel的使用</a></li><li><a href="/webnote/be-note/go-note/6.并发模型.html" title="并发模型" class="sidebar-link">并发模型</a></li><li><a href="/webnote/be-note/go-note/7.反射机制.html" title="反射机制" class="sidebar-link">反射机制</a></li><li><a href="/webnote/be-note/go-note/8.异常处理.html" title="异常处理" class="sidebar-link">异常处理</a></li><li><a href="/webnote/be-note/go-note/9.包管理.html" title="包管理" class="sidebar-link">包管理</a></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="_1-变量和常量"><a href="#_1-变量和常量" class="header-anchor">#</a> 1.变量和常量</h2> <h3 id="_1-1-变量"><a href="#_1-1-变量" class="header-anchor">#</a> 1.1 变量</h3> <p>Go 是静态类型语⾔言，不能在运⾏行期改变变量类型。</p> <h4 id="常用定义方式"><a href="#常用定义方式" class="header-anchor">#</a> 常用定义方式</h4> <p>使⽤用关键字 var 定义变量，⾃自动初始化为零值。如果提供初始化值，可省略变量类型，由</p> <p>编译器⾃自动推断。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> x <span class="token builtin">int</span>
<span class="token keyword">var</span> f <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">1.6</span> 
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span>
</code></pre></div><p>在函数内部，可⽤用更简略的 &quot;:=&quot; ⽅方式定义变量。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">:=</span> <span class="token number">123</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>也可以一次性定义多个变量</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token builtin">int</span>
<span class="token keyword">var</span> s<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token number">123</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>
    a <span class="token builtin">int</span>
    b <span class="token builtin">float32</span> 
<span class="token punctuation">)</span>
</code></pre></div><h4 id="变量占位符"><a href="#变量占位符" class="header-anchor">#</a> 变量占位符</h4> <p>特殊只写变量 &quot;_&quot;，⽤用于忽略值占位。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token boolean">_</span><span class="token punctuation">,</span> s <span class="token operator">:=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>注意，编译器会将未使⽤用的局部变量当做错误。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> s <span class="token builtin">string</span> <span class="token comment">// 全局变量没问题。</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    i <span class="token operator">:=</span> <span class="token number">0</span> <span class="token comment">// Error: i declared and not used。(可使⽤用 &quot;_ = i&quot; 规避)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-常量"><a href="#_1-2-常量" class="header-anchor">#</a> 1.2 常量</h3> <p>常量值必须是编译期可确定的数字、字符串、布尔值。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//声明方式1</span>
	<span class="token keyword">const</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>
	<span class="token comment">//声明方式2</span>
	<span class="token keyword">const</span> <span class="token punctuation">(</span>
		b <span class="token operator">=</span> <span class="token number">2</span>
		c <span class="token operator">=</span> <span class="token number">3</span>
	<span class="token punctuation">)</span>
	
	<span class="token comment">//声明方式3，连续常量</span>
	<span class="token keyword">const</span> <span class="token punctuation">(</span>
		d <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token boolean">iota</span> 	<span class="token comment">//1</span>
		e				      <span class="token comment">//2</span>
		f				      <span class="token comment">//3</span>
		g				      <span class="token comment">//4</span>
	<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">,</span>g<span class="token punctuation">)</span>
	<span class="token comment">//声明方式4，连续位常量</span>
	<span class="token keyword">const</span> <span class="token punctuation">(</span>
		open <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token boolean">iota</span>	<span class="token comment">//0001</span>
		<span class="token builtin">close</span>				      <span class="token comment">//0010</span>
		pending				    <span class="token comment">//0100</span>
		success				    <span class="token comment">//1000</span>
	<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>open<span class="token punctuation">,</span><span class="token builtin">close</span><span class="token punctuation">,</span>pending<span class="token punctuation">,</span>success<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-3-数据类型转换"><a href="#_1-3-数据类型转换" class="header-anchor">#</a> 1.3 数据类型转换</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;math&quot;</span>

<span class="token keyword">type</span> Myint <span class="token builtin">int64</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//go不支持任何隐式类型转换</span>
	<span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>
	<span class="token keyword">var</span> b <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">2</span>
	<span class="token keyword">var</span> c Myint <span class="token operator">=</span> <span class="token number">3</span>
	<span class="token comment">//a = b</span>
	<span class="token comment">//以上代码运行会报错，即使在64位机上int型就是int64类型，但go限制任何隐式类型转换</span>
	<span class="token comment">//b = c	//即使是别名，也不允许</span>
	a <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
	b <span class="token operator">=</span> <span class="token function">int64</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
	<span class="token comment">//使用显示类型转换</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>

	<span class="token comment">//类型的预定义值</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxInt64<span class="token punctuation">,</span>math<span class="token punctuation">.</span>MaxUint32<span class="token punctuation">)</span>

	<span class="token comment">//指针</span>
	d <span class="token operator">:=</span> <span class="token number">1</span>
	dPtr <span class="token operator">:=</span> <span class="token operator">&amp;</span>d
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>dPtr<span class="token punctuation">)</span>
	<span class="token comment">//go语言不支持指针运算</span>
	<span class="token comment">//dPtr = dPtr+1		//运行会报错</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-逻辑分支-条件和循环"><a href="#_2-逻辑分支-条件和循环" class="header-anchor">#</a> 2.逻辑分支:条件和循环</h2> <h3 id="_1-循环"><a href="#_1-循环" class="header-anchor">#</a> 1.循环</h3> <blockquote><p>Go语言只支持for循环</p></blockquote> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main  

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   n <span class="token operator">:=</span> <span class="token number">1</span>
   #方式 <span class="token number">1</span>
   <span class="token keyword">for</span> n <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
      n<span class="token operator">++</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   #方式 <span class="token number">2</span>
   <span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World! &quot;</span><span class="token punctuation">)</span>
      i<span class="token operator">++</span>
   <span class="token punctuation">}</span>
   #死循环
   <span class="token keyword">for</span> <span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-条件"><a href="#_2-条件" class="header-anchor">#</a> 2.条件</h3> <blockquote><p>Go语言条件判断condition只支持bool值</p> <p>支持变量赋值</p></blockquote> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> condition_test

<span class="token keyword">import</span> <span class="token punctuation">(</span>
   <span class="token string">&quot;testing&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestCondition</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token punctuation">{</span>
   t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;My Unit Test!&quot;</span><span class="token punctuation">)</span>
   <span class="token comment">//方式1</span>
   a<span class="token operator">:=</span><span class="token number">1</span>
   <span class="token keyword">if</span> a<span class="token operator">==</span><span class="token number">1</span> <span class="token punctuation">{</span>
      t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;ok&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;notok&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   
   <span class="token comment">//还支持以下写法(变量赋值)</span>
   <span class="token keyword">if</span> b<span class="token operator">:=</span> <span class="token number">1</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">;</span>b<span class="token punctuation">{</span>
      t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
      t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-switch"><a href="#_3-switch" class="header-anchor">#</a> 3.switch</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
   <span class="token string">&quot;fmt&quot;</span>
   <span class="token string">&quot;runtime&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//用法1</span>
   <span class="token keyword">switch</span> os<span class="token operator">:=</span>runtime<span class="token punctuation">.</span>GOOS<span class="token punctuation">;</span>os<span class="token punctuation">{</span>
   <span class="token keyword">case</span> <span class="token string">&quot;darwin&quot;</span><span class="token punctuation">:</span>  <span class="token comment">//case的条件可以有多个值</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;OS X&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">//break go语言不需要使用break</span>
   <span class="token keyword">case</span> <span class="token string">&quot;linux&quot;</span><span class="token punctuation">:</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Linux&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">default</span><span class="token punctuation">:</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span>os<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token comment">//用法2</span>
   i <span class="token operator">:=</span> <span class="token number">1</span>
   <span class="token keyword">switch</span> <span class="token punctuation">{</span>
   <span class="token keyword">case</span> i <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;1&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">case</span> i<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">:</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;=1&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">default</span><span class="token punctuation">:</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-数据类型-数组与切片"><a href="#_3-数据类型-数组与切片" class="header-anchor">#</a> 3.数据类型:数组与切片</h2> <h3 id="_3-1-数组与切片的区别"><a href="#_3-1-数组与切片的区别" class="header-anchor">#</a> 3.1 数组与切片的区别</h3> <blockquote><p>数组是内置(build-in)类型,是一组同类型数据的集合，它是值类型，通过从0开始的下标索引访问元素值。在初始化后长度是固定的，无法修改其长度。当作为方法的参数传入时将复制一份数组而不是引用同一指针。数组的长度也是其类型的一部分，通过内置函数len(array)获取其长度。</p> <p>数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型Slices切片(“动态数组&quot;),与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。切片中有两个概念：一是len长度，二是cap容量，长度是指已经被赋过值的最大下标+1，可通过内置函数len()获得。容量是指切片目前可容纳的最多元素个数，可通过内置函数cap()获得。切片是引用类型，因此在当传递切片时将引用同一指针，修改值将会影响其他的对象。</p></blockquote> <h3 id="_3-2-数组示例"><a href="#_3-2-数组示例" class="header-anchor">#</a> 3.2 数组示例</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token punctuation">{</span><span class="token operator">%</span> raw <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>   <span class="token comment">//声明并初始化为默认零值</span>
   <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
   c <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

   d<span class="token operator">:=</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>   <span class="token comment">//声明同时初始化</span>

   e <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">}</span>       <span class="token comment">//多维数组定义</span>

   f <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>       <span class="token comment">//自适应数组长度默认为0</span>
   g <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span>

   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">,</span>g<span class="token punctuation">)</span>

   <span class="token comment">//数组遍历</span>
   <span class="token comment">//典型写法</span>
   arr1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
   <span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token function">len</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token comment">//go的style</span>
   <span class="token keyword">for</span> idx<span class="token punctuation">,</span>v <span class="token operator">:=</span> <span class="token keyword">range</span> arr1 <span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span>v<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token comment">//数组截取</span>
   arr2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//[2,3]</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//[2,3,4,5]</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> endraw <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-切片示例"><a href="#_3-3-切片示例" class="header-anchor">#</a> 3.3 切片示例</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
   <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//切片和数组的初始化方式很像</span>
   <span class="token keyword">var</span> s0 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>   <span class="token comment">//切片初始化</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s0<span class="token punctuation">)</span>

   s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>    <span class="token comment">//初始化并赋值</span>
   s2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//也可以通过make方法创建切片</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span>s2<span class="token punctuation">)</span>

   s0 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s0<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">//通过这种方式来追加长度</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s0<span class="token punctuation">)</span>

   <span class="token comment">//关于切片的len(长度)和cap(容量)</span>
   s3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//3,3</span>
   s3 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//3,3</span>

   <span class="token comment">//目前来看数组的长度和容量都是一定的,但是看下面这种情况会有一些区别</span>
   s4 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment">//通过make方法生成一个长度为2 容量为4的切片</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//2,4</span>

   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s4<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//0 ,可以访问成功</span>

   <span class="token comment">//fmt.Println(s4[3])   //无法访问 index out of range 说明数组只能访问len范围内的内容</span>

   s4 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s4<span class="token punctuation">,</span><span class="token number">1</span> <span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//3,4</span>

   <span class="token comment">//容量增长规律</span>
   s5 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
   <span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">{</span>
      s5 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s5<span class="token punctuation">,</span>i<span class="token punctuation">)</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s5<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>s5<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token comment">//1 1</span>
   <span class="token comment">//2 2</span>
   <span class="token comment">//3 4</span>
   <span class="token comment">//4 4</span>
   <span class="token comment">//5 8</span>
   <span class="token comment">//6 8</span>
   <span class="token comment">//7 8</span>
   <span class="token comment">//8 8</span>
   <span class="token comment">//9 16</span>
   <span class="token comment">//10 16</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外，需要注意的是，切片是一种共享存储结构，见下方代码解析</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span>
   s2 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span><span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">//[4 5 6] 3 7</span>

   s3 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">]</span>
   s3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>

   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>       <span class="token comment">//[1 2 3 4 0 6 7 8 9 10]</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>       <span class="token comment">// [4 0 6]</span>
   <span class="token comment">//综上可见，修改了s3 对s2和s1都产生了影响 切片是一种共享结构</span>

   <span class="token comment">//ps.数组只有同样长度同样维度才可以比较，那么切片呢</span>
   a1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>
   a2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>
   <span class="token keyword">if</span> a1 <span class="token operator">==</span> a2<span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;equ&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token comment">//上述代码会操作，可见切片之间是不能比较的 切片只能跟nil进行比较</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-数据类型-map的使用"><a href="#_4-数据类型-map的使用" class="header-anchor">#</a> 4. 数据类型:Map的使用</h2> <h3 id="_4-1-map的声明"><a href="#_4-1-map的声明" class="header-anchor">#</a> 4.1 Map的声明</h3> <p>map的声明方式与列表类似，不过声明时并没有初始化len</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">//声明方式1</span>
m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span>

<span class="token comment">//方式2</span>
m1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">//方式3 make</span>
m2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>下面用一段代码示例演示map的使用</p> <p>注意 map通过make方法创建时，只需要指定cap，并不能指定len。且map不能使用cap()方法获取容量</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	m1 <span class="token operator">:=</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>		<span class="token comment">//one</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//1</span>

	m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;two&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>		<span class="token comment">//two</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//2</span>

	m2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//0</span>
	<span class="token comment">//fmt.Println(cap(m2))	//map不允许这种方式访问</span>

	m2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;qqq&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//1</span>

<span class="token punctuation">}</span>
</code></pre></div><p>另外，在go语言中，当访问map中不存在的索引时，会给他一个默认值，这就会导致一个问题，就是无法区分取出来的值真的是0值还是因为不存在分配的默认值，可以通过以下方式解决</p> <div class="language-GO extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	
	m3 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">//0</span>

	m3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">//0</span>
  
  <span class="token comment">//解决方式如下</span>
  <span class="token keyword">if</span> v<span class="token punctuation">,</span>ok <span class="token operator">:=</span> m3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ok<span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;value is &quot;</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;not exist&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-2-map的遍历"><a href="#_4-2-map的遍历" class="header-anchor">#</a> 4.2 Map的遍历</h3> <p>遍历方式与数组和切片相同</p> <div class="language-go extra-class"><pre class="language-go"><code>m4 <span class="token operator">:=</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token operator">:=</span> <span class="token keyword">range</span> m4 <span class="token punctuation">{</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-3-map元素的删除"><a href="#_4-3-map元素的删除" class="header-anchor">#</a> 4.3 Map元素的删除</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">delete</span><span class="token punctuation">(</span>m1<span class="token punctuation">,</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-4-通过map实现工厂模式"><a href="#_4-4-通过map实现工厂模式" class="header-anchor">#</a> 4.4 通过Map实现工厂模式</h3> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   m1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
   m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span><span class="token keyword">return</span> op<span class="token punctuation">}</span>
   m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span><span class="token keyword">return</span> op<span class="token operator">*</span>op<span class="token punctuation">}</span>
   m1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span><span class="token keyword">return</span> op<span class="token operator">*</span>op<span class="token operator">*</span>op<span class="token punctuation">}</span>

   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-5-也可以通过map实现一个set"><a href="#_4-5-也可以通过map实现一个set" class="header-anchor">#</a> 4.5 也可以通过Map实现一个set</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	 <span class="token comment">//一个set的基本要求</span>
   <span class="token comment">//可以添加元素且元素不重复</span>
   <span class="token comment">//判断元素是否存在</span>
   <span class="token comment">//删除元素</span>
   <span class="token comment">//元素个数</span>

   set <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  
   <span class="token comment">//添加元素</span>
   set<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
   set<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
   set<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span>
  
	 <span class="token comment">//判断元素是否存在</span>
   n <span class="token operator">:=</span> <span class="token number">1</span>
   <span class="token keyword">if</span> set<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;exist&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;not exist&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token comment">//元素数量</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">)</span>
   
   <span class="token comment">//删除元素</span>
   <span class="token function">delete</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span>n<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span>
</code></pre></div><h2 id="_5-函数"><a href="#_5-函数" class="header-anchor">#</a> 5.函数</h2> <blockquote><p>Go语言中的函数中所有参数都是值传递，slice、map、channel会有引用传递的错觉是因为在拷贝的时候连同指针的地址一同拷贝了，所以在函数中修改时其实操作的是同一块内存空间</p></blockquote> <p>Go语言中，函数作为一等公民，是可以作为参数也可以作为返回值的，下面这个例子根据这个特性实现了一个有趣的函数</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">//该函数的入参和返回均是一个函数，用于统计函数运行耗时，类似于其他语言中的装饰器</span>
<span class="token keyword">func</span> <span class="token function">timeSpent</span><span class="token punctuation">(</span>inner <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
		start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		ret <span class="token operator">:=</span> <span class="token function">inner</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;time spent:&quot;</span><span class="token punctuation">,</span>time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> ret
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">slowFunc</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> op
<span class="token punctuation">}</span>


<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	tsSlowFunc <span class="token operator">:=</span> <span class="token function">timeSpent</span><span class="token punctuation">(</span>slowFunc<span class="token punctuation">)</span>
	<span class="token function">tsSlowFunc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_5-1-可变长参数和defer"><a href="#_5-1-可变长参数和defer" class="header-anchor">#</a> 5.1 可变长参数和defer</h3> <ol><li>Defer 被用来确保一个函数调用在程序执行结束前执行。同样用来执行一些清理工作。defer 用在像其他语言中的 ensure 和 finally用到的地方。</li> <li>关键字 defer 允许我们推迟到函数返回之前（或任意位置执行 return 语句之后）一刻才执行某个语句或函数（为什么要在返回之后才执行这些语句？因为 return 语句同样可以包含一些操作，而不是单纯地返回某个值）。</li> <li>推迟的函数调用会被压入一个栈中。当外层函数返回时，被推迟的函数会按照</li></ol> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>ops <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
	s <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span>op <span class="token operator">:=</span> <span class="token keyword">range</span> ops<span class="token punctuation">{</span>
		s <span class="token operator">+=</span> op
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> s
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_5-2-延时执行函数defer"><a href="#_5-2-延时执行函数defer" class="header-anchor">#</a> 5.2 延时执行函数defer</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//延时函数，在函数最后返回前执行，可用于执行环境清理，及时报错也会执行</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">//匿名函数</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;this is the end&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//这个函数依然会被执行</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;started&quot;</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/13/2020, 6:45:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/webnote/be-note/go-note/" class="prev router-link-active"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        Go语言简介
      </a></span> <span class="next"><a href="/webnote/be-note/go-note/1.面向对象.html">
        面向对象
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/webnote/assets/js/app.24a2cd47.js" defer></script><script src="/webnote/assets/js/2.3d8178f3.js" defer></script><script src="/webnote/assets/js/10.4318cfdf.js" defer></script>
  </body>
</html>